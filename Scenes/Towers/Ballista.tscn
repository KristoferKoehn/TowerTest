[gd_scene load_steps=23 format=3 uid="uid://ba4apx2hsn1c0"]

[ext_resource type="PackedScene" uid="uid://bla62bopkwx4a" path="res://Assets/TowerModels/towerSquare_bottomA.glb" id="1_3l0de"]
[ext_resource type="Script" path="res://Scenes/Towers/Ballista.cs" id="1_h510k"]
[ext_resource type="PackedScene" uid="uid://bo3cu0x6w7ad3" path="res://Assets/TowerModels/weapon_ballista.glb" id="2_4st7a"]
[ext_resource type="Material" uid="uid://bg8x6nw25lr5f" path="res://Assets/Materials/SelectOutline.tres" id="3_mlqgl"]
[ext_resource type="Material" uid="uid://ts4g382dqw50" path="res://Assets/Materials/MouseOverOutline.tres" id="3_utnsr"]
[ext_resource type="Material" uid="uid://bpfrh7v7vj33w" path="res://Assets/Materials/QueryInvalid.tres" id="4_x07qf"]
[ext_resource type="Material" uid="uid://dp23b2u2d2c2f" path="res://Assets/Materials/QueryValid.tres" id="5_ee6a0"]
[ext_resource type="AudioStream" uid="uid://dj6ffplmep13m" path="res://Assets/Audio/sfx/impact/footstep_carpet_000.ogg" id="5_r0e4s"]
[ext_resource type="AudioStream" uid="uid://ds43miak20xlp" path="res://Assets/Audio/sfx/impact/footstep_carpet_001.ogg" id="6_ee16f"]
[ext_resource type="AudioStream" uid="uid://cxgal3mj7el74" path="res://Assets/Audio/sfx/impact/footstep_carpet_002.ogg" id="7_22vf7"]
[ext_resource type="AudioStream" uid="uid://d1eo1rolf4d72" path="res://Assets/Audio/sfx/impact/footstep_carpet_003.ogg" id="8_a157n"]
[ext_resource type="AudioStream" uid="uid://caejyc8nrh5gh" path="res://Assets/Audio/sfx/impact/footstep_carpet_004.ogg" id="9_xkile"]
[ext_resource type="AudioStream" uid="uid://cn0do7xxewta5" path="res://Assets/Audio/sfx/impact/impactWood_light_000.ogg" id="10_3nx7n"]
[ext_resource type="AudioStream" uid="uid://wyh4ahwpivb" path="res://Assets/Audio/sfx/impact/impactWood_light_001.ogg" id="11_s6svi"]
[ext_resource type="AudioStream" uid="uid://dhbfnohuy118t" path="res://Assets/Audio/sfx/impact/impactWood_light_002.ogg" id="12_bhj1r"]
[ext_resource type="AudioStream" uid="uid://d21rgi8jxfldc" path="res://Assets/Audio/sfx/impact/impactWood_light_003.ogg" id="13_xsonx"]
[ext_resource type="AudioStream" uid="uid://b7ka1k0al7wo7" path="res://Assets/Audio/sfx/impact/impactWood_light_004.ogg" id="14_x7l63"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_j16rl"]
height = 4.43514
radius = 5.22203

[sub_resource type="BoxShape3D" id="BoxShape3D_xpayd"]
resource_local_to_scene = true
size = Vector3(0.831787, 0.521729, 0.798828)

[sub_resource type="BoxMesh" id="BoxMesh_2w1ts"]
resource_local_to_scene = true
flip_faces = true
size = Vector3(1.1, 0.45, 1.1)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_u5dpy"]
random_pitch = 1.69
streams_count = 5
stream_0/stream = ExtResource("5_r0e4s")
stream_1/stream = ExtResource("6_ee16f")
stream_2/stream = ExtResource("7_22vf7")
stream_3/stream = ExtResource("8_a157n")
stream_4/stream = ExtResource("9_xkile")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_wj043"]
streams_count = 5
stream_0/stream = ExtResource("10_3nx7n")
stream_1/stream = ExtResource("11_s6svi")
stream_2/stream = ExtResource("12_bhj1r")
stream_3/stream = ExtResource("13_xsonx")
stream_4/stream = ExtResource("14_x7l63")

[node name="Ballista" type="Node3D" node_paths=PackedStringArray("Outline", "SelectorHitbox", "ActiveRange", "ShotTimer")]
script = ExtResource("1_h510k")
Outline = NodePath("Outline/MeshInstance3D")
MouseOverOutline = ExtResource("3_utnsr")
SelectOutline = ExtResource("3_mlqgl")
InvalidMaterial = ExtResource("4_x07qf")
ValidMaterial = ExtResource("5_ee6a0")
SelectorHitbox = NodePath("StaticBody3D")
ActiveRange = NodePath("ActiveRange")
ShotTimer = NodePath("ShotTimer")

[node name="towerSquare_bottomA2" parent="." instance=ExtResource("1_3l0de")]
transform = Transform3D(0.9, 0, 0, 0, 0.9, 0, 0, 0, 0.9, 0, 0, 0)

[node name="weapon_ballista2" parent="." instance=ExtResource("2_4st7a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.411965, 0)

[node name="ActiveRange" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.24666, 0)
collision_layer = 0
input_ray_pickable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="ActiveRange"]
shape = SubResource("CylinderShape3D_j16rl")

[node name="StaticBody3D" type="StaticBody3D" parent="."]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.338297, 0)
shape = SubResource("BoxShape3D_xpayd")

[node name="Outline" type="Node3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Outline"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0.25, 0)
cast_shadow = 0
mesh = SubResource("BoxMesh_2w1ts")

[node name="ShotTimer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="FiringSound" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_u5dpy")
volume_db = -5.0
max_polyphony = 3

[node name="SelectSound" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_wj043")
volume_db = -10.0
max_polyphony = 3

[connection signal="area_entered" from="ActiveRange" to="." method="_on_active_range_area_entered"]
[connection signal="area_exited" from="ActiveRange" to="." method="_on_active_range_area_exited"]
[connection signal="input_event" from="StaticBody3D" to="." method="_on_static_body_3d_input_event"]
[connection signal="mouse_entered" from="StaticBody3D" to="." method="_on_static_body_3d_mouse_entered"]
[connection signal="mouse_exited" from="StaticBody3D" to="." method="_on_static_body_3d_mouse_exited"]
[connection signal="timeout" from="ShotTimer" to="." method="_on_shot_timer_timeout"]

[editable path="towerSquare_bottomA2"]
[editable path="weapon_ballista2"]
